<!DOCTYPE html>
<html lang="en">

<head>


  <title>RTC-RAMA TECHNICAL COLLEGE LMS</title>
  {% load static %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="description"
    content="Free Datta Able Admin Template come up with latest Bootstrap 4 framework with basic components, form elements and lots of pre-made layout options" />
  <meta name="keywords"
    content="admin templates, bootstrap admin templates, bootstrap 4, dashboard, dashboard templets, sass admin templets, html admin templates, responsive, bootstrap admin templates free download,premium bootstrap admin templates, datta able, datta able bootstrap admin template, free admin theme, free dashboard template" />
  <meta name="author" content="CodedThemes" />


  <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min1.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/style1.css' %}">
  <link rel="stylesheet" href="{% static 'assets/fonts/fontawesome/css/fontawesome-all.min.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/feather.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/data-icon.css' %}">

</head>

<body>
  <nav class="pcoded-navbar">
    <div class="navbar-wrapper">
      <div class="navbar-brand header-logo">
        <a href="" class="b-brand">
          <div class="">
            <i href=></i>
          </div>
          <span class="b-title">Soft Dev Tally LMS</span>
        </a>
        <a class="mobile-menu" id="mobile-collapse" href="javascript:"><span></span></a>
      </div>
      <div class="navbar-content scroll-div">
        <ul class="nav pcoded-inner-navbar">
          <li class="nav-item pcoded-menu-caption">
            <label>Navigation</label>
          </li>
          <li data-username="dashboard Default Ecommerce CRM Analytics Crypto Project" class="nav-item ">
            <a href="" class="nav-link ">
              <a href="" class="nav-link ">
                <span class="pcoded-micon"><i class="feather icon-home"></i></span><span
                  class="pcoded-mtext">Dashboard</span>
              </a>
          </li>
          <li class="nav-item">
            <a href="{% url 'teacher_dashboard' user_id=teacher.id %}" class="nav-link "><span class="pcoded-micon"><i
                  class="feather icon-server text-c"></i></span><span class="pcoded-mtext">Batch
                Allocation</span></a>
          </li>
          <li class="nav-item">
            <a href="{% url 'attendance' user_id=teacher.id %}" class="nav-link "><span class="pcoded-micon"><i
                  class="feather icon-server text-c"></i></span><span class="pcoded-mtext">Attendence</span></a>
          </li>
          <li class="nav-item">
            <a href="{% url 'studentfeestable' branch_id=teacher.branch_id%}" class="nav-link "><span
                class="pcoded-micon"><i class="feather icon-server text-c"></i></span><span class="pcoded-mtext">Student
                Fees</span></a>
          </li>
          <li class="nav-item">
            <a href="{% url 'uploadfile' %}" class="nav-link "><span class="pcoded-micon"><i
                  class="feather icon-server text-c"></i></span><span class="pcoded-mtext">Upload
                Section</span></a>
          </li>
          <!-- <li class="nav-item">
            <a href="{% url 'createsubject' %}" class="nav-link "><span class="pcoded-micon"><i
                  class="feather icon-server text-c"></i></span><span class="pcoded-mtext">Create
                Subject</span></a>
          </li> -->
          <li class="nav-item">
            <a href="{% url 'marks' %}" class="nav-link "><span class="pcoded-micon"><i
                  class="feather icon-server text-c"></i></span><span class="pcoded-mtext">Upload Marks
              </span></a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <header class="navbar pcoded-header navbar-expand-lg navbar-light">
    <div class="m-header">
      <a class="mobile-menu" id="mobile-collapse1" href="javascript:"><span></span></a>
      <a href="/" class="b-brand">
        <div class="b-bg">
          <i class="feather icon-trending-up"></i>
        </div>
        <span class="b-title">Soft Dev Tally LMS</span>
      </a>
    </div>
    <a class="mobile-menu" id="mobile-header" href="javascript:">
      <i class="feather icon-more-horizontal"></i>
    </a>
    <div class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto">
        <li><a href="javascript:" class="full-screen" onclick="javascript:toggleFullScreen()"><i
              class="feather icon-maximize"></i></a></li>
        <!-- <li class="nav-item dropdown">
          <a class="dropdown-toggle" href="javascript:" data-toggle="dropdown">Dropdown</a>
           <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="javascript:">Action</a></li>
            <li><a class="dropdown-item" href="javascript:">Another action</a></li>
            <li><a class="dropdown-item" href="javascript:">Something else here</a></li>
          </ul> -->
        <!-- </li>  -->
        <li class="nav-item">
          <div class="main-search">
            <div class="input-group">
              <input type="text" id="m-search" class="form-control" placeholder="Search . . .">
              <a href="javascript:" class="input-group-append search-close">
                <i class="feather icon-x input-group-text"></i>
              </a>
              <span class="input-group-append search-btn btn btn-primary">
                <i class="feather icon-search input-group-text"></i>
              </span>
            </div>
          </div>
        </li>
      </ul>
      <li>
        <label>
          <i class="fa-solid fa-wallet"></i>
          <input type="checkbox" id="theme-switch" class="d-none">
        </label>
      </li>
      <ul class="navbar-nav ml-auto">
        <li>
          <label>
            <i class="icon feather icon-sun" id="theme-indicator"></i>
            <input type="checkbox" id="theme-switch" class="d-none">
          </label>
        </li>
        <li>
          <!-- <div class="dropdown">
            <a class="dropdown-toggle" href="javascript:" data-toggle="dropdown"><i
                class="icon feather icon-bell"></i></a>
            <div class="dropdown-menu dropdown-menu-right notification">
              <div class="noti-head">
                <h6 class="d-inline-block m-b-0">Notifications</h6>
                <div class="float-right">
                  <a href="javascript:" class="m-r-10">mark as read</a>
                  <a href="javascript:">clear all</a>
                </div>
              </div>
              <ul class="noti-body">
                <li class="n-title">
                  <p class="m-b-0">NEW</p>
                </li>
                <li class="notification">
                  <div class="media">
                    <img class="img-radius" src="/static/assets/img/avatar-1.jpg"
                      alt="Generic placeholder image">
                    <div class="media-body">
                      <p><strong>John Doe</strong><span class="n-time text-muted"><i
                            class="icon feather icon-clock m-r-10"></i>30 min</span></p>
                      <p>New ticket Added</p>
                    </div>
                  </div>
                </li>
                <li class="n-title">
                  <p class="m-b-0">EARLIER</p>
                </li>
                <li class="notification">
                  <div class="media">
                    <img class="img-radius" src="/static/assets/img/avatar-2.jpg"
                      alt="Generic placeholder image">
                    <div class="media-body">
                      <p><strong>Joseph William</strong><span class="n-time text-muted"><i
                            class="icon feather icon-clock m-r-10"></i>30 min</span></p>
                      <p>Prchace New Theme and make payment</p>
                    </div>
                  </div>
                </li>
                <li class="notification">
                  <div class="media">
                    <img class="img-radius" src="/static/assets/img/avatar-3.jpg"
                      alt="Generic placeholder image">
                    <div class="media-body">
                      <p><strong>Sara Soudein</strong><span class="n-time text-muted"><i
                            class="icon feather icon-clock m-r-10"></i>30 min</span></p>
                      <p>currently login</p>
                    </div>
                  </div>
                </li>
              </ul>
              <div class="noti-footer">
                <a href="javascript:">show all</a>
              </div>
            </div>
          </div> -->
        </li>
        <li>
          <div class="dropdown drp-user">
            <a href="javascript:" class="dropdown-toggle" data-toggle="dropdown">
              <i class="icon feather icon-settings"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right profile-notification">
              <div class="pro-head">
                <img src="{% static '/assets/img/avatar-1.jpg' %}" class="img-radius" alt="User-Profile-Image">
                <span>{{teacher.name}}</span>

              </div>
              <ul class="pro-body">
                <!-- <li><a href="#" class="dropdown-item"><i class="feather icon-settings"></i>
                    Settings</a></li> -->
                <li><a href="{% url 'teacher_profile' user_id=teacher.id %}" class="dropdown-item"><i
                      class="feather icon-user"></i>
                    Profile</a></li>
                <!-- <li><a href="#" class="dropdown-item"><i class="feather icon-mail"></i> My
                    Messages</a></li> -->
                <li><a href="{% url 'signup' %}" class="dropdown-item"><i class="feather icon-lock"></i> Log Out</a>
                </li>

              </ul>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </header>


  <!-- [ Main Content ] start -->
  <div class="pcoded-main-container">
    <div class="pcoded-wrapper">
      <div class="pcoded-content">
        <div class="pcoded-inner-content">
          <!-- [ breadcrumb ] start -->

          <!-- [ breadcrumb ] end -->
          <div class="main-body">
            <div class="page-wrapper">


              <!-- [ Main Content ] start -->
              <div class="row">

                <!--[ daily sales section ] start-->
                <div class="col-md-6 col-xl-4">
                  <div class="card daily-sales">
                    <div class="card-block">
                      <h6 class="mb-4">Total Students</h6>
                      <div class="row d-flex align-items-center">
                        <div class="col-9">
                          <h3 class="f-w-300 d-flex align-items-center m-b-0">
                            1</h3>
                        </div>

                        <div class="col-3 text-right">
                          <p class="m-b-0"></p>
                        </div>
                      </div>
                      <div class="" style="height: 7px;">
                        <div class="progress-bar progress-c-theme" role="progressbar" style="width: 50%;"
                          aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--[ daily sales section ] end-->
                <!--[ Monthly  sales section ] starts-->
                <div class="col-md-6 col-xl-4">
                  <div class="card Monthly-sales">
                    <div class="card-block">
                      <h6 class="mb-4">My Branch</h6>
                      <div class="row d-flex align-items-center">
                        <div class="col-9">
                          <h3 class="f-w-300 d-flex align-items-center  m-b-0">{{teacher.branch.name}}
                          </h3>
                        </div>
                      </div>
                      <div class="" style="height: 7px;">
                        <div class="progress-bar progress-c-theme2" role="progressbar" style="width: 35%;"
                          aria-valuenow="35" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--[ Monthly  sales section ] end-->
                <!--[ year  sales section ] starts-->
                <div class="col-md-12 col-xl-4">
                  <div class="card yearly-sales">
                    <div class="card-block">
                      <h6 class="mb-4">My Batch</h6>
                      <div class="row d-flex align-items-center">
                        <div class="col-9">
                          <h3 class="f-w-300 d-flex align-items-center  m-b-0">{{teacher.batches}}</h3>
                        </div>
                        <div class="col-3 text-right">
                          <p class="m-b-0"></p>
                        </div>
                      </div>
                      <div class="" style="height: 7px;">
                        <div class="progress-bar progress-c-theme" role="progressbar" style="width: 70%;"
                          aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-8 col-md-6">
                  <div class="card Recent-Users">
                    <div class="card-header">
                      <h5>Create Batch</h5>
                    </div>
                    <div class="card-block px-0 py-3">
                      <form method="post" action="{% url 'create_batch' %}">
                        {% csrf_token %}
                        <div class="form-group">
                          <label for="name">Batch Name:</label>
                          <input type="text" class="form-control" id="name" name="name" required>
                          <!-- Add the 'required' attribute to make this field mandatory -->
                        </div>
                        <div class="form-row">
                          <div class="form-group col-md-6">
                            <label for="start_time">Start Time:</label>
                            <input type="time" class="form-control" id="start_time" name="start_time" required>
                          </div>
                          <div class="form-group col-md-6">
                            <label for="end_time">End Time:</label>
                            <input type="time" class="form-control" id="end_time" name="end_time" required>
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="branch">Select Branch:</label>
                          <select class="form-control" name="branch" id="branch" required>
                            <option value="">Select Branch</option>
                            {% for branch in branches %}
                            <option value="{{ branch.id }}">{{ branch.name }}</option>
                            {% endfor %}
                          </select>
                          <!-- Add an option for "Select Branch" with an empty value for better usability -->
                        </div>
                        <button type="submit" class="btn btn-primary">Create Batch</button>
                      </form>
                    </div>

                  </div>
                </div>

                <div class="col-xl-8 col-md-6">
                  <div class="card Recent-Users">
                    <div class="card-header">
                      <h5>Students and Their Allocated Batches</h5>
                    </div>
                    <a href="{% url 'student_batch_list' user_id=teacher.id %}" class="btn btn-info mb-3">View
                      Student Batch List</a>
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th>Student ID</th>
                          <th>Student Name</th>
                          <th>Email</th>
                          <th>Allocated Batch</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for student in students %}
                        <tr>
                          <td>{{ student.id }}</td>
                          <td>{{ student.name }}</td>
                          <td>{{ student.email }}</td>
                          <td>
                            {% if student.batches.all %}
                            {% for batch in student.batches.all %}
                            {{ batch.name }} ({{ batch.start_time|time:"h:i A" }} - {{ batch.end_time|time:"h:iA"}})<br>
                            {% endfor %}
                            {% else %}
                            No batch assigned
                            {% endif %}
                          </td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>


                <!--[ Recent Users ] end-->

                <!-- [ statistics year chart ] start -->
                <div class="col-xl-4 col-md-6" style="margin-top: -439px;">
                  <div class="card card-event">
                    <div class="card-block">
                      <div class="row align-items-center justify-content-center">
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-block border-bottom">
                        <div class="row d-flex align-items-center">
                          <div class="col-auto">
                            <i class="feather icon-book f-30 text-c-green"></i>
                          </div>
                          <div class="col">
                            <span class="d-block text-uppercase">Upcoming Class</span>
                            <h3 class="f-w-300">11/04/2024</h3>
                          </div>
                        </div>
                      </div>
                      <div class="card-block">
                        <div class="row d-flex align-items-center">
                          <div class="col-auto">
                            <i class="feather icon-map-pin f-30 text-c-blue"></i>
                          </div>
                          <div class="col">
                            <h3 class="f-w-300">3</h3>
                            <span class="d-block text-uppercase">Total Students in Batch</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      // const userId = '123'; // Replace '123' with the actual user ID
      const apiUrl = `/student_batch_list/${userId}`;

      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          console.log(data); // Do something with the response data
        })
        .catch(error => console.error('Error fetching data:', error));
    </script>
    <!-- JavaScript -->
    <script src="{% static 'assets/js/vendor-all.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/pcoded.min.js' %}"></script>
    <script src="{% static 'assets/js/dark-mode.js' %}"></script>
    <script src="{% static 'assets/js/main.js' %}"></script>

</body>

</html>